import { useState, useEffect } from â€œreactâ€;

const BRANDS = {
personal: {
id: â€œpersonalâ€, nameAr: â€œØ­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø´Ø®ØµÙŠâ€, handle: â€œ@zahrani_iz7â€, emoji: â€œğŸ§ â€,
primary: â€œ#1DA1F2â€, secondary: â€œ#0a84d4â€, dark: â€œ#021428â€,
gradient: â€œlinear-gradient(135deg, #1DA1F2, #0a84d4)â€,
glow: â€œ#1DA1F244â€,
focus: â€œAI ÙˆØªÙ‚Ù†ÙŠØ© Ù„Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠâ€,
tone: â€œØ®Ø¨ÙŠØ± AIØŒ Ù„Ù‡Ø¬Ø© Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ Ù…Ø­ØªÙˆÙ‰ Ù‚ÙŠÙ‘Ù… ÙˆÙ…Ø«ÙŠØ± Ù„Ù„ØªÙØ§Ø¹Ù„â€,
contentTypes: [â€œØ®Ø¨Ø± AI Ø¬Ø¯ÙŠØ¯â€, â€œÙ†ØµÙŠØ­Ø© Ø¥Ù†ØªØ§Ø¬ÙŠØ©â€, â€œØ£Ø¯Ø§Ø© Ù…Ø¬Ø§Ù†ÙŠØ©â€, â€œØ±Ø£ÙŠ Ø´Ø®ØµÙŠâ€, â€œØ³Ø¤Ø§Ù„ ØªÙØ§Ø¹Ù„ÙŠâ€, â€œØ®ÙŠØ· Threadâ€],
platforms: [â€œØªÙˆÙŠØªØ±/Xâ€, â€œØªÙŠÙ„ÙŠØºØ±Ø§Ù…â€, â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€, â€œØªÙŠÙƒ ØªÙˆÙƒâ€],
cta: â€œØªØ§Ø¨Ø¹ @zahrani_iz7 Ù„Ù„Ù…Ø²ÙŠØ¯ ğŸ””â€,
logoSvg: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"> <circle cx="20" cy="20" r="18" fill="#1DA1F2"/> <text x="20" y="26" text-anchor="middle" font-size="18" font-weight="bold" fill="white" font-family="sans-serif">Z</text> </svg>`,
},
cardscart: {
id: â€œcardscartâ€, nameAr: â€œØ³Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øªâ€, handle: â€œcardscart.netâ€, emoji: â€œğŸ›’â€,
primary: â€œ#39CDD1â€, secondary: â€œ#095D70â€, dark: â€œ#021a1fâ€,
gradient: â€œlinear-gradient(135deg, #39CDD1, #095D70)â€,
glow: â€œ#39CDD144â€,
orange: â€œ#FA8811â€,
focus: â€œØ¨Ø·Ø§Ù‚Ø§Øª Ø±Ù‚Ù…ÙŠØ© - Ø£Ù„Ø¹Ø§Ø¨ØŒ Ø§Ø´ØªØ±Ø§ÙƒØ§ØªØŒ Ø´Ø­Ù†â€,
tone: â€œØªØ±ÙˆÙŠØ¬ÙŠ Ù…Ø¨Ø§Ø´Ø±ØŒ Ù„Ù‡Ø¬Ø© Ø³Ø¹ÙˆØ¯ÙŠØ©ØŒ Ø¹Ø±ÙˆØ¶ ÙˆÙ‚ÙŠÙ…Ø©â€,
contentTypes: [â€œØ¹Ø±Ø¶ Ù…Ù†ØªØ¬â€, â€œÙ…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø·Ø§Ù‚Ø§Øªâ€, â€œÙ…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯â€, â€œØ¹Ø±Ø¶ Ù…Ø­Ø¯ÙˆØ¯ âš¡â€, â€œÙ„ÙŠØ´ Ù†Ø­Ù† Ø£ÙØ¶Ù„â€, â€œØªÙØ§Ø¹Ù„ÙŠâ€],
platforms: [â€œØªÙˆÙŠØªØ±/Xâ€, â€œØªÙŠÙ„ÙŠØºØ±Ø§Ù…â€, â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€, â€œØªÙŠÙƒ ØªÙˆÙƒâ€],
cta: â€œØ§Ø·Ù„Ø¨ Ø§Ù„Ø­ÙŠÙ† Ø¹Ù„Ù‰ cardscart.net âš¡â€,
products: [â€œØ§ÙŠØªÙˆÙ†Ø² Ø³Ø¹ÙˆØ¯ÙŠâ€, â€œØ¨Ù„Ø§ÙŠØ³ØªÙŠØ´Ù†â€, â€œØ±ÙˆØ¨Ù„ÙˆÙƒØ³â€, â€œÙ‚ÙˆÙ‚Ù„ Ø¨Ù„Ø§ÙŠâ€, â€œØ³ØªÙŠÙ…â€, â€œØ§ÙƒØ³ Ø¨ÙˆÙƒØ³â€, â€œØ±ÙŠØ²Ø± Ù‚ÙˆÙ„Ø¯â€, â€œØ¨Ø¨Ø¬ÙŠâ€, â€œÙØ±ÙŠ ÙØ§ÙŠØ±â€, â€œØ§Ù…Ø§Ø²ÙˆÙ†â€],
logoSvg: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"> <polygon points="4,8 22,8 22,16 12,16 12,24 22,24 22,32 4,32" fill="#39CDD1"/> <polygon points="12,16 28,16 28,24 12,24" fill="#18AAB5"/> <polygon points="12,24 28,24 28,32 12,32" fill="#095D70"/> </svg>`,
},
madarak: {
id: â€œmadarakâ€, nameAr: â€œÙ…Ø¯Ø§Ø±Ùƒ Ø§Ù„Ù†Ø®Ø¨Ø©â€, handle: â€œmadarekelite.comâ€, emoji: â€œğŸ“â€,
primary: â€œ#C8972Aâ€, secondary: â€œ#6b4e10â€, dark: â€œ#130d03â€,
gradient: â€œlinear-gradient(135deg, #C8972A, #6b4e10)â€,
glow: â€œ#C8972A44â€,
focus: â€œØªØ­Ø¶ÙŠØ± Ù‚Ø¯Ø±Ø§Øª ÙˆØªØ­ØµÙŠÙ„ÙŠâ€,
tone: â€œØªØ­ÙÙŠØ²ÙŠ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØŒ ÙŠØªÙƒÙ„Ù… Ø¨Ù„ØºØ© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠâ€,
contentTypes: [â€œØ³Ø¤Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠâ€, â€œÙ†ØµÙŠØ­Ø© Ø¯Ø±Ø§Ø³ÙŠØ©â€, â€œØªØ­Ø¯ÙŠ ÙŠÙˆÙ…ÙŠâ€, â€œÙ‚ØµØ© Ù†Ø¬Ø§Ø­â€, â€œØ­Ù‚ÙŠÙ‚Ø© Ù…ÙÙŠØ¯Ø©â€, â€œØªØ­ÙÙŠØ²â€],
platforms: [â€œØªÙˆÙŠØªØ±/Xâ€, â€œØªÙŠÙ„ÙŠØºØ±Ø§Ù…â€, â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€, â€œØªÙŠÙƒ ØªÙˆÙƒâ€],
cta: â€œØ§Ø¨Ø¯Ø£ Ù…Ø¬Ø§Ù†Ø§Ù‹ Ø¹Ù„Ù‰ madarekelite.com ğŸ“šâ€,
logoSvg: `<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"> <polygon points="20,4 38,14 20,24 2,14" fill="#C8972A"/> <rect x="30" y="14" width="3" height="11" rx="1.5" fill="#6b4e10"/> <ellipse cx="31.5" cy="26" rx="3.5" ry="2" fill="#C8972A" opacity="0.8"/> <rect x="9" y="20" width="22" height="14" rx="2" fill="#6b4e10"/> <rect x="13" y="25" width="14" height="2.5" rx="1.2" fill="#C8972A" opacity="0.9"/> <rect x="13" y="30" width="10" height="1.5" rx="0.8" fill="#C8972A" opacity="0.5"/> </svg>`,
},
};

const PLATFORM_SPECS = {
â€œØªÙˆÙŠØªØ±/Xâ€: { emoji: â€œğ•â€, max: 280, tip: â€œØªØºØ±ÙŠØ¯Ø© Ù…Ø¤Ø«Ø±Ø© ÙˆÙ‚ØµÙŠØ±Ø©â€ },
â€œØªÙŠÙ„ÙŠØºØ±Ø§Ù…â€: { emoji: â€œâœˆï¸â€, max: 1000, tip: â€œØ¨ÙˆØ³Øª Ù…ØªÙˆØ³Ø· Ù…Ø¹ ØªÙØ§ØµÙŠÙ„â€ },
â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€: { emoji: â€œğŸ“¸â€, max: 2200, tip: â€œÙƒØ§Ø¨Ø´Ù† + Ù‡Ø§Ø´ØªØ§Ù‚Ø§Øªâ€ },
â€œØªÙŠÙƒ ØªÙˆÙƒâ€: { emoji: â€œğŸ¬â€, max: 500, tip: â€œØ³ÙƒØ±ÙŠØ¨Øª ÙÙŠØ¯ÙŠÙˆ 30-60 Ø«Ø§Ù†ÙŠØ©â€ },
};

const COMPETITORS = [
{ name: â€œLikeCardâ€, url: â€œar-saudi.likecard.comâ€ },
{ name: â€œØ±ØµÙŠØ¯â€, url: â€œrasseed.comâ€ },
{ name: â€œØ¯Ù„ÙŠÙ„ Ø³ØªÙˆØ±â€, url: â€œdaleelstore.comâ€ },
{ name: â€œØ§Ø´Ø­Ù†Ù‡Ø§â€, url: â€œish7nha.comâ€ },
{ name: â€œØ¹Ø¨Ø§Ø¯ÙŠâ€, url: â€œabadystore.comâ€ },
];

function Dots({ color = â€œ#fffâ€ }) {
return (
<span style={{ display: â€œinline-flexâ€, gap: 4, alignItems: â€œcenterâ€ }}>
{[0,1,2].map(i => (
<span key={i} style={{ width: 6, height: 6, borderRadius: â€œ50%â€, background: color,
animation: â€œdb 1.2s infiniteâ€, animationDelay: `${i*0.2}s`, display: â€œinline-blockâ€ }} />
))}
</span>
);
}

function Lbl({ children }) {
return <div style={{ fontSize: 10, color: â€œ#555â€, fontWeight: 700, letterSpacing: 1,
marginBottom: 8, textTransform: â€œuppercaseâ€ }}>{children}</div>;
}

// Post Preview Component (HTML-based, no canvas)
function PostPreview({ brand, headline, subtext, platform }) {
const b = BRANDS[brand];
const isVertical = platform === â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€ || platform === â€œØªÙŠÙƒ ØªÙˆÙƒâ€;
const w = isVertical ? 160 : 280;
const h = isVertical ? 280 : 160;

return (
<div style={{
width: w, height: h, borderRadius: 10, overflow: â€œhiddenâ€, position: â€œrelativeâ€,
background: b.gradient, border: `2px solid ${b.primary}66`,
boxShadow: `0 8px 32px ${b.glow}`, flexShrink: 0,
}}>
{/* BG overlay */}
<div style={{ position: â€œabsoluteâ€, inset: 0,
background: `radial-gradient(circle at 80% 20%, ${b.primary}33, transparent 60%)` }} />

```
  {/* Top bar */}
  <div style={{ position: "absolute", top: 0, left: 0, right: 0, height: 3, background: "rgba(255,255,255,0.4)" }} />

  {/* Logo + brand name */}
  <div style={{ position: "absolute", top: 10, right: 10, display: "flex", alignItems: "center", gap: 6,
    background: "rgba(0,0,0,0.3)", borderRadius: 20, padding: "4px 8px 4px 6px" }}>
    <div style={{ width: 20, height: 20 }}
      dangerouslySetInnerHTML={{ __html: b.logoSvg }} />
    <span style={{ fontSize: 9, color: "#fff", fontWeight: 700 }}>{b.nameAr}</span>
  </div>

  {/* Headline */}
  {headline && (
    <div style={{ position: "absolute", top: isVertical ? "35%" : "30%", right: 10, left: 10,
      fontSize: isVertical ? 13 : 11, fontWeight: 800, color: "#fff",
      lineHeight: 1.5, direction: "rtl", textShadow: "0 1px 4px rgba(0,0,0,0.5)" }}>
      {headline}
    </div>
  )}

  {/* Subtext */}
  {subtext && (
    <div style={{ position: "absolute", top: isVertical ? "58%" : "56%", right: 10, left: 10,
      fontSize: 9, color: "rgba(255,255,255,0.8)", direction: "rtl", lineHeight: 1.4 }}>
      {subtext}
    </div>
  )}

  {!headline && !subtext && (
    <div style={{ position: "absolute", inset: 0, display: "flex", alignItems: "center",
      justifyContent: "center", flexDirection: "column", gap: 6 }}>
      <div style={{ fontSize: 28 }}>{b.emoji}</div>
      <div style={{ fontSize: 10, color: "rgba(255,255,255,0.5)" }}>Ø£Ø¶Ù Ù†ØµØ§Ù‹ Ù„Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©</div>
    </div>
  )}

  {/* Bottom */}
  <div style={{ position: "absolute", bottom: 0, left: 0, right: 0, height: 28,
    background: "rgba(0,0,0,0.4)", display: "flex", alignItems: "center",
    justifyContent: "space-between", padding: "0 8px" }}>
    <span style={{ fontSize: 8, color: "rgba(255,255,255,0.6)" }}>{b.handle}</span>
    <span style={{ fontSize: 8, color: "rgba(255,255,255,0.4)" }}>
      {new Date().toLocaleDateString("ar-SA")}
    </span>
  </div>
</div>
```

);
}

// Score badges
function Score({ value, label }) {
const color = value >= 8 ? â€œ#22c55eâ€ : value >= 6 ? â€œ#f59e0bâ€ : â€œ#ef4444â€;
return (
<div style={{ display: â€œflexâ€, flexDirection: â€œcolumnâ€, alignItems: â€œcenterâ€, gap: 4 }}>
<div style={{ width: 44, height: 44, borderRadius: â€œ50%â€,
border: `2.5px solid ${color}`, background: color + â€œ18â€,
display: â€œflexâ€, alignItems: â€œcenterâ€, justifyContent: â€œcenterâ€,
fontSize: 14, fontWeight: 800, color }}>
{value}
</div>
<div style={{ fontSize: 9, color: â€œ#666â€ }}>{label}</div>
</div>
);
}

// ===== CONTENT TAB =====
function ContentTab() {
const [brand, setBrand] = useState(null);
const [platform, setPlatform] = useState(null);
const [type, setType] = useState(null);
const [extra, setExtra] = useState(â€â€);
const [result, setResult] = useState(â€â€);
const [scores, setScores] = useState(null);
const [loading, setLoading] = useState(false);
const [copied, setCopied] = useState(false);

const b = brand ? BRANDS[brand] : null;

const generate = async () => {
if (!brand || !platform || !type) return;
setLoading(true); setResult(â€â€); setScores(null);
const p = PLATFORM_SPECS[platform];
const prompt = `Ø£Ù†Øª Ù…Ø¯ÙŠØ± Ù…Ø­ØªÙˆÙ‰ Ù…Ø­ØªØ±Ù Ù„Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ.

Ø§ÙƒØªØ¨ Ù…Ø­ØªÙˆÙ‰ ${platform} Ù„Ø­Ø³Ø§Ø¨ â€œ${b.nameAr}â€ (${b.focus}).
Ù†ÙˆØ¹: ${type}
Ø£Ø³Ù„ÙˆØ¨: ${b.tone}
Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ${p.max} Ø­Ø±Ù
${extra ? `ØªÙØ§ØµÙŠÙ„: ${extra}` : â€œâ€}

Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯:

- Ø§ÙƒØªØ¨ Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ù…Ø¹ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ ğŸ”¥
- Ø§Ø¬Ø¹Ù„Ù‡ Ù…Ø«ÙŠØ±Ø§Ù‹ Ù„Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ‚
- Ø£Ø¶Ù ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©: ${b.cta}
  ${platform === â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€ ? â€œ- Ø£Ø¶Ù 12 Ù‡Ø§Ø´ØªØ§Ù‚â€ : â€œâ€}
  ${platform === â€œØªÙŠÙƒ ØªÙˆÙƒâ€ ? â€œ- Ø³ÙƒØ±ÙŠØ¨Øª ÙƒÙ„Ø§Ù…ÙŠ Ù…Ø¹ [Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØªØµÙˆÙŠØ±]â€ : â€œâ€}
  ${type === â€œØ®ÙŠØ· Threadâ€ ? â€œ- Ø®ÙŠØ· Ù…Ù† 5 ØªØºØ±ÙŠØ¯Ø§Øª Ù…Ø±Ù‚Ù…Ø©â€ : â€œâ€}

Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø£Ø¶Ù Ø³Ø·Ø±Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ù‡ÙƒØ°Ø§ Ø¨Ø§Ù„Ø¶Ø¨Ø·:
SCORES:Ù‚ÙˆØ©:X Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©:X ØªÙØ§Ø¹Ù„:X
(X Ø±Ù‚Ù… Ù…Ù† 1 Ù„Ù€ 10)

Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯ÙˆÙ† Ù…Ù‚Ø¯Ù…Ø©.`;

```
try {
  const res = await fetch("https://api.anthropic.com/v1/messages", {
    method: "POST", headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ model: "claude-sonnet-4-20250514", max_tokens: 1200,
      messages: [{ role: "user", content: prompt }] }),
  });
  const d = await res.json();
  const full = d.content?.map(x => x.text || "").join("") || "âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£";
  const m = full.match(/SCORES:Ù‚ÙˆØ©:(\d+)\s*Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©:(\d+)\s*ØªÙØ§Ø¹Ù„:(\d+)/);
  if (m) {
    setScores({ power: +m[1], trust: +m[2], engage: +m[3] });
    setResult(full.replace(/SCORES:.*$/m, "").trim());
  } else {
    setResult(full);
  }
} catch { setResult("âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©"); }
setLoading(false);
```

};

return (
<div>
<Lbl>â‘  Ø§Ù„Ø­Ø³Ø§Ø¨</Lbl>
<div style={{ display: â€œgridâ€, gridTemplateColumns: â€œrepeat(3,1fr)â€, gap: 8, marginBottom: 18 }}>
{Object.values(BRANDS).map(br => (
<button key={br.id}
onClick={() => { setBrand(br.id); setPlatform(null); setType(null); setResult(â€â€); setScores(null); }}
style={{
background: brand === br.id ? br.gradient : â€œrgba(255,255,255,0.05)â€,
border: `1.5px solid ${brand === br.id ? "transparent" : "rgba(255,255,255,0.08)"}`,
borderRadius: 12, padding: â€œ12px 6pxâ€, cursor: â€œpointerâ€,
boxShadow: brand === br.id ? `0 6px 20px ${br.glow}` : â€œnoneâ€,
transform: brand === br.id ? â€œtranslateY(-2px)â€ : â€œnoneâ€, transition: â€œall 0.2sâ€,
}}>
<div style={{ fontSize: 24, marginBottom: 3 }}>{br.emoji}</div>
<div style={{ fontSize: 10, color: â€œ#fffâ€, fontWeight: 700 }}>{br.nameAr}</div>
</button>
))}
</div>

```
  {b && (
    <>
      <Lbl>â‘¡ Ø§Ù„Ù…Ù†ØµØ©</Lbl>
      <div style={{ display: "grid", gridTemplateColumns: "repeat(4,1fr)", gap: 6, marginBottom: 18 }}>
        {b.platforms.map(pl => (
          <button key={pl} onClick={() => { setPlatform(pl); setResult(""); setScores(null); }}
            style={{
              background: platform === pl ? b.gradient : "rgba(255,255,255,0.05)",
              border: `1.5px solid ${platform === pl ? "transparent" : "rgba(255,255,255,0.08)"}`,
              borderRadius: 8, padding: "8px 4px", cursor: "pointer", transition: "all 0.2s",
            }}>
            <div style={{ fontSize: 14 }}>{PLATFORM_SPECS[pl]?.emoji}</div>
            <div style={{ fontSize: 9, color: "#ccc", marginTop: 2 }}>{pl}</div>
          </button>
        ))}
      </div>

      <Lbl>â‘¢ Ø§Ù„Ù†ÙˆØ¹</Lbl>
      <div style={{ display: "flex", flexWrap: "wrap", gap: 6, marginBottom: 18 }}>
        {b.contentTypes.map(t => (
          <button key={t} onClick={() => { setType(t); setResult(""); setScores(null); }}
            style={{
              background: type === t ? b.gradient : "rgba(255,255,255,0.06)",
              border: `1.5px solid ${type === t ? "transparent" : "rgba(255,255,255,0.08)"}`,
              borderRadius: 18, padding: "6px 12px", fontSize: 11, color: "#fff",
              cursor: "pointer", fontWeight: type === t ? 700 : 400, transition: "all 0.2s",
            }}>{t}</button>
        ))}
      </div>

      {brand === "cardscart" && (
        <>
          <Lbl>Ø§Ù„Ù…Ù†ØªØ¬</Lbl>
          <div style={{ display: "flex", flexWrap: "wrap", gap: 5, marginBottom: 14 }}>
            {b.products.map(p => (
              <button key={p} onClick={() => setExtra(p)}
                style={{
                  background: extra === p ? b.gradient : "rgba(255,255,255,0.04)",
                  border: `1px solid ${extra === p ? "transparent" : "rgba(255,255,255,0.07)"}`,
                  borderRadius: 6, padding: "3px 9px", fontSize: 10, color: "#ccc", cursor: "pointer",
                }}>{p}</button>
            ))}
          </div>
        </>
      )}

      <Lbl>â‘£ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©</Lbl>
      <textarea value={extra} onChange={e => setExtra(e.target.value)}
        placeholder="Ø£ÙŠ ØªÙØ§ØµÙŠÙ„ ØªØ±ÙŠØ¯Ù‡Ø§..."
        style={{
          width: "100%", boxSizing: "border-box", background: "rgba(255,255,255,0.05)",
          border: "1.5px solid rgba(255,255,255,0.1)", borderRadius: 10, padding: "10px 12px",
          color: "#fff", fontSize: 13, resize: "none", height: 65, outline: "none",
          fontFamily: "inherit", marginBottom: 12,
        }} />

      <button onClick={generate} disabled={!type || !platform || loading}
        style={{
          width: "100%", padding: 13, border: "none", borderRadius: 12,
          fontSize: 14, fontWeight: 800, color: "#fff", cursor: "pointer", transition: "all 0.2s",
          background: !type || !platform ? "rgba(255,255,255,0.07)" : b.gradient,
          boxShadow: type && platform ? `0 6px 20px ${b.glow}` : "none",
        }}>
        {loading ? <Dots /> : "âœ¨ ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰"}
      </button>
    </>
  )}

  {result && !loading && (
    <div style={{ marginTop: 16, background: "rgba(255,255,255,0.04)",
      border: `1.5px solid ${b.primary}44`, borderRadius: 12, padding: 14,
      animation: "fadeUp 0.3s ease" }}>
      <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 8 }}>
        <span style={{ fontSize: 10, color: b.secondary, fontWeight: 700 }}>{b.nameAr} â€¢ {platform}</span>
        <span style={{ fontSize: 10, color: "#555" }}>{result.length} Ø­Ø±Ù</span>
      </div>
      <p style={{ whiteSpace: "pre-wrap", lineHeight: 1.9, fontSize: 13, color: "#e0e0e0",
        margin: 0, direction: "rtl" }}>{result}</p>

      {scores && (
        <div style={{ marginTop: 14, padding: "12px 0", borderTop: "1px solid rgba(255,255,255,0.06)" }}>
          <div style={{ fontSize: 10, color: "#555", textAlign: "center", marginBottom: 10 }}>ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰</div>
          <div style={{ display: "flex", justifyContent: "space-around" }}>
            <Score value={scores.power} label="Ù‚ÙˆØ©" />
            <Score value={scores.trust} label="Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©" />
            <Score value={scores.engage} label="ØªÙØ§Ø¹Ù„" />
          </div>
        </div>
      )}

      <div style={{ display: "flex", gap: 8, marginTop: 12 }}>
        <button onClick={() => { navigator.clipboard.writeText(result); setCopied(true); setTimeout(() => setCopied(false), 2000); }}
          style={{ flex: 1, padding: "9px", background: copied ? "#16a34a" : b.gradient,
            borderRadius: 8, border: "none", fontSize: 12, fontWeight: 700, color: "#fff", cursor: "pointer" }}>
          {copied ? "âœ… ØªÙ…!" : "ğŸ“‹ Ø§Ù†Ø³Ø®"}
        </button>
        <button onClick={generate}
          style={{ padding: "9px 14px", background: "rgba(255,255,255,0.06)",
            border: "1px solid rgba(255,255,255,0.1)", borderRadius: 8, fontSize: 12, color: "#aaa", cursor: "pointer" }}>
          ğŸ”„
        </button>
      </div>
    </div>
  )}
</div>
```

);
}

// ===== DESIGN TAB =====
function DesignTab() {
const [brand, setBrand] = useState(â€œcardscartâ€);
const [platform, setPlatform] = useState(â€œØªÙˆÙŠØªØ±/Xâ€);
const [headline, setHeadline] = useState(â€â€);
const [subtext, setSubtext] = useState(â€â€);
const [generating, setGenerating] = useState(false);
const [copied, setCopied] = useState(false);
const b = BRANDS[brand];

const genText = async () => {
if (!headline) return;
setGenerating(true);
try {
const res = await fetch(â€œhttps://api.anthropic.com/v1/messagesâ€, {
method: â€œPOSTâ€, headers: { â€œContent-Typeâ€: â€œapplication/jsonâ€ },
body: JSON.stringify({ model: â€œclaude-sonnet-4-20250514â€, max_tokens: 60,
messages: [{ role: â€œuserâ€, content: `Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø© Ù‚ØµÙŠØ±Ø© (8 ÙƒÙ„Ù…Ø§Øª Ø£Ù‚ØµÙ‰) Ø³Ø¹ÙˆØ¯ÙŠØ© Ù„Ø¨ÙˆØ³Øª Ø¹Ù†: "${headline}". Ø§Ù„Ø¬Ù…Ù„Ø© ÙÙ‚Ø·.` }] }),
});
const d = await res.json();
setSubtext(d.content?.[0]?.text?.trim() || â€œâ€);
} catch {}
setGenerating(false);
};

const copyPost = () => {
const text = `${headline}\n\n${subtext}\n\n${b.cta}`;
navigator.clipboard.writeText(text);
setCopied(true); setTimeout(() => setCopied(false), 2000);
};

const PLATFORMS_DESIGN = [â€œØªÙˆÙŠØªØ±/Xâ€, â€œØ§Ù†Ø³ØªÙ‚Ø±Ø§Ù…â€, â€œØªÙŠÙ„ÙŠØºØ±Ø§Ù…â€, â€œØªÙŠÙƒ ØªÙˆÙƒâ€];

return (
<div>
<Lbl>Ø§Ù„Ø­Ø³Ø§Ø¨</Lbl>
<div style={{ display: â€œgridâ€, gridTemplateColumns: â€œrepeat(3,1fr)â€, gap: 8, marginBottom: 16 }}>
{Object.values(BRANDS).map(br => (
<button key={br.id} onClick={() => setBrand(br.id)}
style={{
background: brand === br.id ? br.gradient : â€œrgba(255,255,255,0.05)â€,
border: `1.5px solid ${brand === br.id ? "transparent" : "rgba(255,255,255,0.08)"}`,
borderRadius: 10, padding: â€œ10px 6pxâ€, cursor: â€œpointerâ€,
boxShadow: brand === br.id ? `0 4px 16px ${br.glow}` : â€œnoneâ€, transition: â€œall 0.2sâ€,
}}>
<div style={{ fontSize: 20 }}>{br.emoji}</div>
<div style={{ fontSize: 9, color: â€œ#fffâ€, marginTop: 2, fontWeight: 700 }}>{br.nameAr}</div>
</button>
))}
</div>

```
  <Lbl>Ø§Ù„Ù…Ù†ØµØ©</Lbl>
  <div style={{ display: "flex", gap: 6, marginBottom: 16 }}>
    {PLATFORMS_DESIGN.map(pl => (
      <button key={pl} onClick={() => setPlatform(pl)}
        style={{
          flex: 1, background: platform === pl ? b.gradient : "rgba(255,255,255,0.05)",
          border: "none", borderRadius: 8, padding: "6px 4px", fontSize: 9, color: "#fff", cursor: "pointer",
        }}>{PLATFORM_SPECS[pl]?.emoji}<br />{pl}</button>
    ))}
  </div>

  {/* Preview */}
  <div style={{ display: "flex", justifyContent: "center", marginBottom: 16 }}>
    <PostPreview brand={brand} headline={headline} subtext={subtext} platform={platform} />
  </div>

  <Lbl>Ø§Ù„Ù†Øµ</Lbl>
  <input value={headline} onChange={e => setHeadline(e.target.value)}
    placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ø¨ÙˆØ³Øª..."
    style={{ width: "100%", boxSizing: "border-box", background: "rgba(255,255,255,0.06)",
      border: "1.5px solid rgba(255,255,255,0.1)", borderRadius: 8, padding: "10px 12px",
      color: "#fff", fontSize: 13, outline: "none", marginBottom: 8, fontFamily: "inherit" }} />

  <div style={{ display: "flex", gap: 8, marginBottom: 16 }}>
    <input value={subtext} onChange={e => setSubtext(e.target.value)}
      placeholder="Ù†Øµ Ø«Ø§Ù†ÙˆÙŠ..."
      style={{ flex: 1, background: "rgba(255,255,255,0.06)", border: "1.5px solid rgba(255,255,255,0.1)",
        borderRadius: 8, padding: "8px 12px", color: "#fff", fontSize: 12, outline: "none", fontFamily: "inherit" }} />
    <button onClick={genText} disabled={!headline || generating}
      style={{ padding: "8px 12px", background: b.gradient, border: "none", borderRadius: 8,
        fontSize: 11, color: "#fff", cursor: "pointer", whiteSpace: "nowrap" }}>
      {generating ? <Dots /> : "âœ¨ ÙˆÙ„Ù‘Ø¯"}
    </button>
  </div>

  <div style={{ padding: "12px 14px", background: "rgba(255,255,255,0.04)",
    border: `1px solid ${b.primary}33`, borderRadius: 10, marginBottom: 12,
    fontSize: 12, color: "#888", direction: "rtl", lineHeight: 1.8 }}>
    <div style={{ color: b.primary, fontWeight: 700, marginBottom: 4, fontSize: 10 }}>Ù†Øµ Ø§Ù„Ø¨ÙˆØ³Øª:</div>
    {headline || "Ø£Ø¶Ù Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}
    {subtext && <><br /><span style={{ color: "#666" }}>{subtext}</span></>}
    <br /><span style={{ color: b.secondary }}>{b.cta}</span>
  </div>

  <button onClick={copyPost}
    style={{ width: "100%", padding: 12, background: copied ? "#16a34a" : b.gradient,
      border: "none", borderRadius: 10, fontSize: 13, fontWeight: 700, color: "#fff", cursor: "pointer" }}>
    {copied ? "âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!" : "ğŸ“‹ Ø§Ù†Ø³Ø® Ù†Øµ Ø§Ù„Ø¨ÙˆØ³Øª"}
  </button>
</div>
```

);
}

// ===== NEWS TAB =====
function NewsTab() {
const [mode, setMode] = useState(â€œsourcesâ€);
const [items, setItems] = useState([]);
const [loading, setLoading] = useState(false);
const [fetched, setFetched] = useState(false);

const fetch_ = async () => {
setLoading(true); setItems([]); setFetched(true);
let prompt = â€œâ€;
if (mode === â€œsourcesâ€) {
prompt = `Ø£Ø¹Ø·Ù†ÙŠ 6 Ø£Ø®Ø¨Ø§Ø± AI ÙˆØªÙ‚Ù†ÙŠØ© Ù…Ù‡Ù…Ø© Ù…Ù† Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹ØŒ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ø­Ø³Ø§Ø¨ ØªÙ‚Ù†ÙŠ Ø³Ø¹ÙˆØ¯ÙŠ @zahrani_iz7. Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©: Claude AI, Google Labs, The Verge, Andrew Ng, 9to5Mac, CNET. Ù„ÙƒÙ„ Ø®Ø¨Ø±: Ø¹Ù†ÙˆØ§Ù†ØŒ Ù…Ù„Ø®Øµ Ø¬Ù…Ù„ØªÙŠÙ†ØŒ Ù…ÙˆØ«ÙˆÙ‚ÙŠØ© (Ø¹Ø§Ù„ÙŠ/Ù…ØªÙˆØ³Ø·)ØŒ Ù…ØµØ¯Ø±ØŒ ØªØºØ±ÙŠØ¯Ø© Ø³Ø¹ÙˆØ¯ÙŠØ© Ø¬Ø§Ù‡Ø²Ø©. JSON ÙÙ‚Ø·: [{"title":"","summary":"","reliability":"","source":"","tweet":""}]`;
} else if (mode === â€œcompetitorsâ€) {
prompt = `Ø­Ù„Ù„ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† Ù„Ù…ØªØ¬Ø± Ø³Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (cardscart.net) Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ: ${COMPETITORS.map(c => c.name + " (" + c.url + ")").join("ØŒ ")}. Ù„ÙƒÙ„ Ù…Ù†Ø§ÙØ³: Ù…ÙŠØ²ØªÙ‡ØŒ Ø¶Ø¹ÙÙ‡ØŒ ÙƒÙŠÙ ØªØªÙÙˆÙ‚ Ø¹Ù„ÙŠÙ‡ Ø³Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§ØªØŒ ÙÙƒØ±Ø© ØªØºØ±ÙŠØ¯Ø© ØªØ±ÙˆÙŠØ¬ÙŠØ©. JSON ÙÙ‚Ø·: [{"name":"","strength":"","weakness":"","advantage":"","tweet":""}]`;
} else {
prompt = `Ø£Ø¹Ø·Ù†ÙŠ 5 ØªØ±Ù†Ø¯Ø§Øª ÙˆØ£Ø®Ø¨Ø§Ø± Ø³Ø¹ÙˆØ¯ÙŠØ© ØªÙ‚Ù†ÙŠØ© Ù…Ù† Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹ Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù…ØªØ¬Ø± Ø¨Ø·Ø§Ù‚Ø§Øª Ø±Ù‚Ù…ÙŠØ©. Ù„ÙƒÙ„: Ø¹Ù†ÙˆØ§Ù†ØŒ Ù…Ù„Ø®ØµØŒ Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©ØŒ ÙØ±ØµØ© ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ù„Ø³Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª. JSON ÙÙ‚Ø·: [{"title":"","summary":"","reliability":"","opportunity":""}]`;
}

```
try {
  const res = await fetch("https://api.anthropic.com/v1/messages", {
    method: "POST", headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ model: "claude-sonnet-4-20250514", max_tokens: 2000,
      system: "Ø£Ø¬Ø¨ Ø¨Ù€ JSON ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† markdown.",
      messages: [{ role: "user", content: prompt }] }),
  });
  const d = await res.json();
  setItems(JSON.parse(d.content?.[0]?.text?.replace(/```json|```/g, "").trim() || "[]"));
} catch { setItems([{ title: "âš ï¸ ØªØ¹Ø°Ù‘Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„", summary: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰", reliability: "â€”" }]); }
setLoading(false);
```

};

const rc = r => r === â€œØ¹Ø§Ù„ÙŠâ€ ? â€œ#22c55eâ€ : r === â€œÙ…ØªÙˆØ³Ø·â€ ? â€œ#f59e0bâ€ : â€œ#ef4444â€;

return (
<div>
<Lbl>Ø§Ù„Ù†ÙˆØ¹</Lbl>
<div style={{ display: â€œflexâ€, gap: 6, marginBottom: 16 }}>
{[[â€œsourcesâ€, â€œğŸ“¡ Ù…ØµØ§Ø¯Ø±Ùƒâ€], [â€œcompetitorsâ€, â€œâš”ï¸ Ù…Ù†Ø§ÙØ³ÙˆÙ†â€], [â€œsaudiâ€, â€œğŸ‡¸ğŸ‡¦ ØªØ±Ù†Ø¯Ø§Øªâ€]].map(([v, l]) => (
<button key={v} onClick={() => { setMode(v); setFetched(false); setItems([]); }}
style={{ flex: 1, background: mode === v ? â€œlinear-gradient(135deg,#1DA1F2,#0a84d4)â€ : â€œrgba(255,255,255,0.06)â€,
border: â€œnoneâ€, borderRadius: 8, padding: â€œ8px 4pxâ€, fontSize: 11, color: â€œ#fffâ€,
cursor: â€œpointerâ€, fontWeight: mode === v ? 700 : 400 }}>{l}</button>
))}
</div>

```
  {mode === "competitors" && (
    <div style={{ display: "flex", flexWrap: "wrap", gap: 5, marginBottom: 14 }}>
      {COMPETITORS.map(c => (
        <span key={c.name} style={{ padding: "3px 8px", background: "rgba(57,205,209,0.15)",
          color: "#39CDD1", borderRadius: 6, fontSize: 10 }}>{c.name}</span>
      ))}
    </div>
  )}

  <button onClick={fetch_} disabled={loading}
    style={{ width: "100%", padding: 13, background: "linear-gradient(135deg,#1DA1F2,#0a84d4)",
      border: "none", borderRadius: 12, fontSize: 14, fontWeight: 700, color: "#fff",
      cursor: "pointer", marginBottom: 16 }}>
    {loading ? <Dots /> : mode === "competitors" ? "âš”ï¸ Ø­Ù„Ù‘Ù„ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†" : "ğŸ“¡ Ø¬ÙŠØ¨ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±"}
  </button>

  {fetched && !loading && items.map((item, i) => (
    <div key={i} style={{ background: "rgba(255,255,255,0.04)",
      border: "1px solid rgba(255,255,255,0.07)", borderRadius: 12, padding: 14, marginBottom: 10 }}>
      {mode === "competitors" ? (
        <>
          <div style={{ fontSize: 14, fontWeight: 800, color: "#39CDD1", marginBottom: 8 }}>{item.name}</div>
          <div style={{ fontSize: 12, color: "#888", marginBottom: 4, direction: "rtl" }}>ğŸ’ª <b style={{ color: "#aaa" }}>Ù…ÙŠØ²ØªÙ‡:</b> {item.strength}</div>
          <div style={{ fontSize: 12, color: "#888", marginBottom: 4, direction: "rtl" }}>âš ï¸ <b style={{ color: "#aaa" }}>Ø¶Ø¹ÙÙ‡:</b> {item.weakness}</div>
          <div style={{ fontSize: 12, color: "#22c55e", marginBottom: 8, direction: "rtl" }}>âœ… <b>ØªÙÙˆÙ‚Ù†Ø§:</b> {item.advantage}</div>
          {item.tweet && <div style={{ padding: "8px 10px", background: "rgba(57,205,209,0.08)",
            borderRadius: 8, fontSize: 12, color: "#ccc", direction: "rtl", lineHeight: 1.7 }}>ğŸ¦ {item.tweet}</div>}
        </>
      ) : (
        <>
          <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 6 }}>
            {item.reliability && <span style={{ fontSize: 10, padding: "2px 8px", borderRadius: 20,
              background: rc(item.reliability) + "22", color: rc(item.reliability), fontWeight: 700 }}>
              {item.reliability}</span>}
            {item.source && <span style={{ fontSize: 10, color: "#555" }}>{item.source}</span>}
          </div>
          <div style={{ fontSize: 13, fontWeight: 700, color: "#fff", marginBottom: 6, direction: "rtl" }}>{item.title}</div>
          <div style={{ fontSize: 12, color: "#aaa", lineHeight: 1.7, direction: "rtl", marginBottom: 6 }}>{item.summary}</div>
          {item.opportunity && <div style={{ fontSize: 12, color: "#f59e0b", direction: "rtl" }}>ğŸ’¡ {item.opportunity}</div>}
          {item.tweet && <div style={{ marginTop: 8, padding: "8px 10px", background: "rgba(29,161,242,0.08)",
            borderRadius: 8, fontSize: 12, color: "#ccc", direction: "rtl", lineHeight: 1.7 }}>ğŸ¦ {item.tweet}</div>}
        </>
      )}
    </div>
  ))}
  {!fetched && <div style={{ textAlign: "center", color: "#333", padding: 40, fontSize: 13 }}>Ø§Ø¶ØºØ· Ù„Ø¬ÙŠØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ğŸ‘†</div>}
</div>
```

);
}

// ===== REPORT TAB =====
function ReportTab() {
const [report, setReport] = useState(â€â€);
const [loading, setLoading] = useState(false);
const [copied, setCopied] = useState(false);

const RAMADAN_TIMES = [
{ time: â€œ8:00 Øµâ€, note: â€œØ¨Ø¹Ø¯ Ø§Ù„Ø³Ø­ÙˆØ± â€” ØªÙØ§Ø¹Ù„ ØµØ¨Ø§Ø­ÙŠ Ù†Ø´Ø·â€, color: â€œ#f59e0bâ€ },
{ time: â€œ3:00 Ù…â€, note: â€œÙ‚Ø¨Ù„ Ø§Ù„Ø¹ØµØ± â€” Ø°Ø±ÙˆØ© Ø§Ù„ØªØµÙØ­ Ø±Ù…Ø¶Ø§Ù†â€, color: â€œ#39CDD1â€ },
{ time: â€œ8:00 Ù…â€, note: â€œØ¨Ø¹Ø¯ Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…Ø¨Ø§Ø´Ø±Ø© ğŸ”¥ Ø£Ø¹Ù„Ù‰ ØªÙØ§Ø¹Ù„â€, color: â€œ#ef4444â€ },
{ time: â€œ11:30 Ù…â€, note: â€œØ§Ù„Ø³Ù‡Ø±Ø© Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ© â€” Ø¬Ù…Ù‡ÙˆØ± Ù†Ø´Ø·â€, color: â€œ#a855f7â€ },
];

const gen = async () => {
setLoading(true); setReport(â€â€);
const now = new Date();
const dateStr = now.toLocaleDateString(â€œar-SAâ€, { weekday: â€œlongâ€, day: â€œnumericâ€, month: â€œlongâ€ });
const prompt = `Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ ØªØ³ÙˆÙŠÙ‚ÙŠ Ø°ÙƒÙŠ Ù„Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ØŒ ØµØ§Ø­Ø¨ Ø³Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª (cardscart.net)ØŒ Ù…Ø¯Ø§Ø±Ùƒ Ø§Ù„Ù†Ø®Ø¨Ø©ØŒ ÙˆØ­Ø³Ø§Ø¨ ØªÙ‚Ù†ÙŠ @zahrani_iz7.

Ø§ÙƒØªØ¨ ØªÙ‚Ø±ÙŠØ± Ù…Ø³Ø§Ø¦ÙŠ ÙˆØ¯ÙˆØ¯ Ù„Ù„ÙŠÙˆÙ… ${dateStr} Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø³Ø¹ÙˆØ¯ÙŠ Ù…Ø¹ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ ğŸ”¥â¤ï¸.

ÙŠØ´Ù…Ù„:
1ï¸âƒ£ Ø£Ù‡Ù… 3 Ø£Ø®Ø¨Ø§Ø± AI ÙˆØªÙ‚Ù†ÙŠØ© Ø§Ù„ÙŠÙˆÙ…
2ï¸âƒ£ ØªØ­Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„ØªØ­Ø±ÙƒØ§Øª Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† (likecard, rasseed, daleelstore, ish7nha, abadystore)
3ï¸âƒ£ ØªØºØ±ÙŠØ¯ØªØ§Ù† Ø¬Ø§Ù‡Ø²ØªØ§Ù† Ù„Ø³Ù„Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù„Ù†Ø´Ø± ØºØ¯Ø§Ù‹
4ï¸âƒ£ ÙÙƒØ±Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„Ù„ØªÙ…ÙŠØ² Ø¹Ù† Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ†
5ï¸âƒ£ Ù†ØµÙŠØ­Ø© ØªØ³ÙˆÙŠÙ‚ÙŠØ© Ø³Ø±ÙŠØ¹Ø©

Ø§Ø¬Ø¹Ù„Ù‡ Ø¯Ø§ÙØ¦Ø§Ù‹ ÙˆÙˆØ¯ÙŠØ§Ù‹ ÙƒØµØ¯ÙŠÙ‚ Ø®Ø¨ÙŠØ± Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ… ğŸŒ™`;

```
try {
  const res = await fetch("https://api.anthropic.com/v1/messages", {
    method: "POST", headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ model: "claude-sonnet-4-20250514", max_tokens: 2000,
      messages: [{ role: "user", content: prompt }] }),
  });
  const d = await res.json();
  setReport(d.content?.map(x => x.text || "").join("") || "âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£");
} catch { setReport("âš ï¸ ØªØ¹Ø°Ù‘Ø± ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"); }
setLoading(false);
```

};

return (
<div>
<div style={{ background: â€œlinear-gradient(135deg, #1a0a2e, #0a1828)â€, borderRadius: 14,
padding: 16, marginBottom: 16, border: â€œ1px solid rgba(255,255,255,0.06)â€ }}>
<div style={{ fontSize: 11, color: â€œ#555â€ }}>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠ ğŸŒ™</div>
<div style={{ fontSize: 20, fontWeight: 800, color: â€œ#fffâ€, marginTop: 4 }}>Ù…Ù„Ø®Øµ ÙŠÙˆÙ…Ùƒ</div>
<div style={{ fontSize: 11, color: â€œ#444â€, marginTop: 4 }}>Ø£Ø®Ø¨Ø§Ø± + Ù…Ù†Ø§ÙØ³ÙˆÙ† + ØªØºØ±ÙŠØ¯Ø§Øª + Ø±Ù…Ø¶Ø§Ù†</div>
</div>

```
  <Lbl>â° Ø£ÙØ¶Ù„ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ù†Ø´Ø± ÙÙŠ Ø±Ù…Ø¶Ø§Ù†</Lbl>
  {RAMADAN_TIMES.map((r, i) => (
    <div key={i} style={{ display: "flex", alignItems: "center", gap: 12, padding: "10px 12px",
      background: "rgba(255,255,255,0.03)", borderRadius: 8, marginBottom: 6,
      borderRight: `3px solid ${r.color}` }}>
      <div style={{ fontSize: 14, fontWeight: 800, color: r.color, minWidth: 65 }}>{r.time}</div>
      <div style={{ fontSize: 11, color: "#aaa", direction: "rtl" }}>{r.note}</div>
    </div>
  ))}

  <button onClick={gen} disabled={loading}
    style={{ width: "100%", padding: 14, marginTop: 16, marginBottom: 16,
      background: "linear-gradient(135deg,#7c3aed,#4f46e5)", border: "none", borderRadius: 12,
      fontSize: 14, fontWeight: 800, color: "#fff", cursor: "pointer",
      boxShadow: "0 6px 20px #7c3aed44" }}>
    {loading ? <Dots /> : "ğŸŒ™ ÙˆÙ„Ù‘Ø¯ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø¡"}
  </button>

  {report && !loading && (
    <div style={{ background: "rgba(255,255,255,0.03)", border: "1px solid rgba(124,58,237,0.3)",
      borderRadius: 12, padding: 16 }}>
      <p style={{ whiteSpace: "pre-wrap", lineHeight: 2, fontSize: 13, color: "#ddd",
        margin: 0, direction: "rtl" }}>{report}</p>
      <button onClick={() => { navigator.clipboard.writeText(report); setCopied(true); setTimeout(() => setCopied(false), 2000); }}
        style={{ marginTop: 14, width: "100%", padding: 10, background: copied ? "#16a34a" : "rgba(124,58,237,0.3)",
          border: "1px solid #7c3aed55", borderRadius: 8, fontSize: 12, color: copied ? "#fff" : "#a78bfa", cursor: "pointer" }}>
        {copied ? "âœ… ØªÙ…!" : "ğŸ“‹ Ø§Ù†Ø³Ø® Ø§Ù„ØªÙ‚Ø±ÙŠØ±"}
      </button>
    </div>
  )}
</div>
```

);
}

// ===== IDEAS TAB =====
function IdeasTab() {
const [brand, setBrand] = useState(â€œpersonalâ€);
const [ideas, setIdeas] = useState([]);
const [loading, setLoading] = useState(false);
const b = BRANDS[brand];

const gen = async () => {
setLoading(true); setIdeas([]);
const prompt = `Ø§Ù‚ØªØ±Ø­ 6 Ø£ÙÙƒØ§Ø± Ù…Ø­ØªÙˆÙ‰ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„Ù€${b.nameAr} (${b.focus}) Ù„Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¨Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©. Ù„ÙƒÙ„ ÙÙƒØ±Ø©: Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø§Ù„Ù…Ù†ØµØ©ØŒ Ø§Ù„Ù†ÙˆØ¹ØŒ Ù„Ù…Ø§Ø°Ø§ Ø³ØªÙ†Ø¬Ø­ØŒ ØªÙ‚Ø¯ÙŠØ± Ø§Ù„ØªÙØ§Ø¹Ù„. JSON ÙÙ‚Ø·: [{"title":"","platform":"","type":"","why":"","engagement":"Ø¹Ø§Ù„ÙŠ/Ù…ØªÙˆØ³Ø·"}]`;
try {
const res = await fetch(â€œhttps://api.anthropic.com/v1/messagesâ€, {
method: â€œPOSTâ€, headers: { â€œContent-Typeâ€: â€œapplication/jsonâ€ },
body: JSON.stringify({ model: â€œclaude-sonnet-4-20250514â€, max_tokens: 1200,
system: â€œØ£Ø¬Ø¨ Ø¨Ù€ JSON ÙÙ‚Ø·.â€, messages: [{ role: â€œuserâ€, content: prompt }] }),
});
const d = await res.json();
setIdeas(JSON.parse(d.content?.[0]?.text?.replace(/`json|`/g, â€œâ€).trim() || â€œ[]â€));
} catch {}
setLoading(false);
};

return (
<div>
<Lbl>Ø§Ù„Ø­Ø³Ø§Ø¨</Lbl>
<div style={{ display: â€œgridâ€, gridTemplateColumns: â€œrepeat(3,1fr)â€, gap: 8, marginBottom: 16 }}>
{Object.values(BRANDS).map(br => (
<button key={br.id} onClick={() => { setBrand(br.id); setIdeas([]); }}
style={{
background: brand === br.id ? br.gradient : â€œrgba(255,255,255,0.05)â€,
border: â€œnoneâ€, borderRadius: 10, padding: â€œ10px 6pxâ€, cursor: â€œpointerâ€,
boxShadow: brand === br.id ? `0 4px 16px ${br.glow}` : â€œnoneâ€, transition: â€œall 0.2sâ€,
}}>
<div style={{ fontSize: 20 }}>{br.emoji}</div>
<div style={{ fontSize: 9, color: â€œ#fffâ€, marginTop: 2, fontWeight: 700 }}>{br.nameAr}</div>
</button>
))}
</div>
<button onClick={gen} disabled={loading}
style={{ width: â€œ100%â€, padding: 13, background: b.gradient, border: â€œnoneâ€, borderRadius: 12,
fontSize: 14, fontWeight: 700, color: â€œ#fffâ€, cursor: â€œpointerâ€, marginBottom: 16,
boxShadow: `0 6px 18px ${b.glow}` }}>
{loading ? <Dots /> : â€œğŸ’¡ ÙˆÙ„Ù‘Ø¯ 6 Ø£ÙÙƒØ§Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹â€}
</button>
<div style={{ display: â€œgridâ€, gap: 8 }}>
{ideas.map((idea, i) => (
<div key={i} style={{ background: `linear-gradient(135deg, ${b.dark}, rgba(255,255,255,0.02))`,
border: `1px solid ${b.primary}33`, borderRadius: 10, padding: 12 }}>
<div style={{ display: â€œflexâ€, justifyContent: â€œspace-betweenâ€, marginBottom: 5 }}>
<span style={{ fontSize: 9, padding: â€œ2px 8pxâ€, background: b.primary + â€œ33â€,
color: b.primary, borderRadius: 12 }}>{idea.platform}</span>
<span style={{ fontSize: 9, padding: â€œ2px 8pxâ€,
background: idea.engagement === â€œØ¹Ø§Ù„ÙŠâ€ ? â€œ#22c55e22â€ : â€œ#f59e0b22â€,
color: idea.engagement === â€œØ¹Ø§Ù„ÙŠâ€ ? â€œ#22c55eâ€ : â€œ#f59e0bâ€, borderRadius: 12 }}>
ØªÙØ§Ø¹Ù„ {idea.engagement}</span>
</div>
<div style={{ fontSize: 13, fontWeight: 700, color: â€œ#fffâ€, marginBottom: 3, direction: â€œrtlâ€ }}>{idea.title}</div>
<div style={{ fontSize: 11, color: â€œ#777â€, direction: â€œrtlâ€ }}>ğŸ’¡ {idea.why}</div>
</div>
))}
</div>
</div>
);
}

// ===== MAIN =====
const TABS = [
{ id: â€œcontentâ€, label: â€œÙ…Ø­ØªÙˆÙ‰â€, emoji: â€œâœï¸â€ },
{ id: â€œdesignâ€, label: â€œØªØµÙ…ÙŠÙ…â€, emoji: â€œğŸ¨â€ },
{ id: â€œnewsâ€, label: â€œØ£Ø®Ø¨Ø§Ø±â€, emoji: â€œğŸ“¡â€ },
{ id: â€œideasâ€, label: â€œØ£ÙÙƒØ§Ø±â€, emoji: â€œğŸ’¡â€ },
{ id: â€œreportâ€, label: â€œØªÙ‚Ø±ÙŠØ±â€, emoji: â€œğŸŒ™â€ },
];

export default function App() {
const [tab, setTab] = useState(â€œcontentâ€);
const [time, setTime] = useState(new Date());
useEffect(() => { const t = setInterval(() => setTime(new Date()), 30000); return () => clearInterval(t); }, []);
const hr = time.getHours();
const greeting = hr < 12 ? â€œØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ğŸŒ…â€ : hr < 17 ? â€œÙ…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ± â˜€ï¸â€ : â€œÙ…Ø³Ø§Ø¡ Ø§Ù„Ù†ÙˆØ± ğŸŒ™â€;

return (
<div dir=â€œrtlâ€ style={{ minHeight: â€œ100vhâ€,
background: â€œradial-gradient(ellipse at 70% 0%, #071220 0%, #040608 60%)â€,
fontFamily: â€œâ€˜Segoe UIâ€™, Tahoma, sans-serifâ€, color: â€œ#fffâ€ }}>
<style>{`@keyframes fadeUp { from { opacity:0; transform:translateY(12px) } to { opacity:1; transform:translateY(0) } } @keyframes db { 0%,80%,100% { transform:scale(0.7) } 40% { transform:scale(1.2) } } * { box-sizing: border-box } input, textarea, button { font-family: 'Segoe UI', Tahoma, sans-serif } button { cursor: pointer } ::-webkit-scrollbar { width: 3px } ::-webkit-scrollbar-thumb { background: #222; border-radius: 4px }`}</style>

```
  {/* Header */}
  <div style={{ background: "rgba(255,255,255,0.03)", borderBottom: "1px solid rgba(255,255,255,0.05)",
    padding: "14px 16px", position: "sticky", top: 0, zIndex: 100, backdropFilter: "blur(16px)" }}>
    <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
      <div>
        <div style={{ fontSize: 18, fontWeight: 900, letterSpacing: -0.5,
          background: "linear-gradient(90deg, #1DA1F2, #39CDD1, #C8972A)",
          WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>âš¡ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
        <div style={{ fontSize: 11, color: "#444", marginTop: 2 }}>{greeting}ØŒ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡</div>
      </div>
      <div style={{ textAlign: "left" }}>
        <div style={{ fontSize: 11, color: "#777" }}>
          {time.toLocaleDateString("ar-SA", { weekday: "short", day: "numeric", month: "short" })}</div>
        <div style={{ fontSize: 11, color: "#555" }}>
          {time.toLocaleTimeString("ar-SA", { hour: "2-digit", minute: "2-digit" })}</div>
      </div>
    </div>
    {/* Brand chips */}
    <div style={{ display: "flex", gap: 6, marginTop: 10 }}>
      {Object.values(BRANDS).map(b => (
        <div key={b.id} style={{ padding: "3px 10px", borderRadius: 20, fontSize: 10, fontWeight: 700,
          background: b.gradient, color: "#fff", opacity: 0.9 }}>{b.emoji} {b.nameAr}</div>
      ))}
    </div>
  </div>

  {/* Tabs */}
  <div style={{ display: "flex", borderBottom: "1px solid rgba(255,255,255,0.05)",
    background: "rgba(0,0,0,0.4)", position: "sticky", top: 90, zIndex: 99 }}>
    {TABS.map(t => (
      <button key={t.id} onClick={() => setTab(t.id)}
        style={{ flex: 1, padding: "11px 4px", background: "none", border: "none",
          borderBottom: tab === t.id ? "2px solid #1DA1F2" : "2px solid transparent",
          color: tab === t.id ? "#fff" : "#444", fontSize: 9, fontWeight: tab === t.id ? 700 : 400,
          transition: "all 0.2s" }}>
        <div style={{ fontSize: 16 }}>{t.emoji}</div>
        <div style={{ marginTop: 2 }}>{t.label}</div>
      </button>
    ))}
  </div>

  {/* Content */}
  <div style={{ padding: "18px 14px", maxWidth: 560, margin: "0 auto" }}>
    {tab === "content" && <ContentTab />}
    {tab === "design" && <DesignTab />}
    {tab === "news" && <NewsTab />}
    {tab === "ideas" && <IdeasTab />}
    {tab === "report" && <ReportTab />}
  </div>
</div>
```

);
}
